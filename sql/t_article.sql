/*
 Navicat Premium Data Transfer

 Source Server         : test
 Source Server Type    : MySQL
 Source Server Version : 50720
 Source Host           : localhost:3306
 Source Schema         : test

 Target Server Type    : MySQL
 Target Server Version : 50720
 File Encoding         : 65001

 Date: 18/10/2018 23:27:08
*/

SET NAMES utf8mb4;
SET FOREIGN_KEY_CHECKS = 0;

-- ----------------------------
-- Table structure for t_article
-- ----------------------------
DROP TABLE IF EXISTS `t_article`;
CREATE TABLE `t_article`  (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `article_type` char(1) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT '0' COMMENT '文章分类(0-原创,1-转载,2-翻译)',
  `userid` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL,
  `article_title` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL,
  `article_label` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT '文章标签（json格式存储）',
  `article_category` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT '博客分类',
  `article_private_category` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT '个人分类',
  `last_modified` datetime(0) NULL DEFAULT NULL,
  `create_time` datetime(0) NULL DEFAULT NULL,
  `article_content` text CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL,
  `draft` tinyint(1) NULL DEFAULT 0 COMMENT '是否为草稿',
  `privacy` tinyint(1) NULL DEFAULT 0 COMMENT '是否为私密文章',
  `read_count` int(255) NULL DEFAULT 0,
  `comment_count` int(255) NULL DEFAULT 0,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 3 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_general_ci COMMENT = '文章表' ROW_FORMAT = Dynamic;

-- ----------------------------
-- Records of t_article
-- ----------------------------
INSERT INTO `t_article` VALUES (2, '0', 'xiaojian', '欢迎使用MyBlog-MarkDown编辑器', '[\"title\",\"title1\"]', '程序人生', '[\"艺术\"]', '2018-10-18 13:58:34', '2018-10-18 13:58:34', '2018-10-18 21:48:09.185 [http-nio-9080-exec-4] INFO  c.hbwh.xj.myblog.web.interceptor.LoginInterceptor - -----------------request method: POST,url: /articles/xiaojian\n2018-10-18 21:48:09.187 [http-nio-9080-exec-4] WARN  org.springframework.validation.DataBinder - Skipping URI variable \'userid\' since the request contains a bind value with the same name.\n2018-10-18 21:48:09.253 [http-nio-9080-exec-4] INFO  c.hbwh.xj.myblog.web.interceptor.LoginInterceptor - -----------------request method: POST,url: /error\n2018-10-18 21:54:04.496 [http-nio-9080-exec-6] INFO  c.hbwh.xj.myblog.web.interceptor.LoginInterceptor - -----------------request method: GET,url: /blogs/personal-categories/xiaojian\n2018-10-18 21:54:04.498 [http-nio-9080-exec-6] INFO  c.hbwh.xj.myblog.web.interceptor.LoginInterceptor - -----------------request method: GET,url: /error\n2018-10-18 21:54:04.496 [http-nio-9080-exec-7] INFO  c.hbwh.xj.myblog.web.interceptor.LoginInterceptor - -----------------request method: GET,url: /blogs/categories\n2018-10-18 21:54:04.508 [http-nio-9080-exec-7] INFO  c.hbwh.xj.myblog.web.interceptor.LoginInterceptor - -----------------request method: GET,url: /error\nCreating a new SqlSession\nSqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19d318] was not registered for synchronization because synchronization is not active\nJDBC Connection [HikariProxyConnection@14562795 wrapping com.mysql.cj.jdbc.ConnectionImpl@ff001f] will not be managed by Spring\n==>  Preparing: SELECT userid,password,usernm,signature,image_path,level,page_view,score,rank FROM t_user WHERE userid = ? \n==> Parameters: xiaojian(String)\n<==    Columns: userid, password, usernm, signature, image_path, level, page_view, score, rank\n<==        Row: xiaojian, DC26FE875BA2C58D87998933E53D4D520487E198F1217E8B610C55E01DE8DFE6, xiaojian, 我就是我，不一样的烟火。。。, null, null, null, null, null\n<==      Total: 1\nClosing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19d318]\n2018-10-18 21:54:19.574 [http-nio-9080-exec-8] INFO  com.hbwh.xj.myblog.controller.UserController - cookies: [javax.servlet.http.Cookie@1e33fd0, javax.servlet.http.Cookie@168aca7]\n2018-10-18 21:54:19.574 [http-nio-9080-exec-8] INFO  com.hbwh.xj.myblog.controller.UserController - /users/sessions sessionid: C056FA9BB8E04AB75F999EFD3355AD07, new? true\n2018-10-18 21:54:21.475 [http-nio-9080-exec-9] INFO  c.hbwh.xj.myblog.web.interceptor.LoginInterceptor - -----------------request method: GET,url: /articles/xiaojian\nCreating a new SqlSession\nSqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16193d5] was not registered for synchronization because synchronization is not active\nJDBC Connection [HikariProxyConnection@27686793 wrapping com.mysql.cj.jdbc.ConnectionImpl@ff001f] will not be managed by Spring\n==>  Preparing: SELECT id,userid,article_title,article_label,article_category,article_private_category,last_modified,create_time,article_content FROM t_article WHERE ( userid = ? ) order by create_time DESC \n==> Parameters: xiaojian(String)\n<==      Total: 0\nClosing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16193d5]\n2018-10-18 21:54:23.211 [http-nio-9080-exec-1] INFO  c.hbwh.xj.myblog.web.interceptor.LoginInterceptor - -----------------request method: GET,url: /blogs/categories\nCreating a new SqlSession\nSqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fc7dc4] was not registered for synchronization because synchronization is not active\nJDBC Connection [HikariProxyConnection@15985783 wrapping com.mysql.cj.jdbc.ConnectionImpl@ff001f] will not be managed by Spring\n==>  Preparing: SELECT id,category FROM t_blog_category \n==> Parameters: \n<==    Columns: id, category\n<==        Row: 1, 人工智能\n<==        Row: 2, 移动开发\n2018-10-18 21:54:23.213 [http-nio-9080-exec-10] INFO  c.hbwh.xj.myblog.web.interceptor.LoginInterceptor - -----------------request method: GET,url: /blogs/personal-categories/xiaojian\nCreating a new SqlSession\nSqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bc4c2d] was not registered for synchronization because synchronization is not active\n<==        Row: 3, 物联网\n<==        Row: 4, 架构\nJDBC Connection [HikariProxyConnection@10699182 wrapping com.mysql.cj.jdbc.ConnectionImpl@94970b] will not be managed by Spring\n==>  Preparing: SELECT userid,category FROM t_private_category WHERE ( userid = ? ) \n<==        Row: 5, 云计算/大数据\n<==        Row: 6, 游戏开发\n==> Parameters: xiaojian(String)\n<==        Row: 7, 运维\n<==        Row: 8, 数据库\n<==        Row: 9, 前端\n<==        Row: 10, 后端\n<==        Row: 11, 编程语言\n<==        Row: 12, 研发管理\n<==        Row: 13, 安全\n<==        Row: 14, 程序人生\n<==        Row: 15, 区块链\n<==        Row: 16, 音视频开发\n<==        Row: 17, 咨询\n<==        Row: 18, 计算机理论与基础\n<==      Total: 18\nClosing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fc7dc4]\n<==      Total: 0\nClosing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bc4c2d]\n2018-10-18 21:55:12.213 [http-nio-9080-exec-2] INFO  c.hbwh.xj.myblog.web.interceptor.LoginInterceptor - -----------------request method: POST,url: /articles/xiaojian\n2018-10-18 21:55:12.214 [http-nio-9080-exec-2] WARN  org.springframework.validation.DataBinder - Skipping URI variable \'userid\' since the request contains a bind value with the same name.\nCreating a new SqlSession\nRegistering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@917c47]\nJDBC Connection [HikariProxyConnection@5279839 wrapping com.mysql.cj.jdbc.ConnectionImpl@ff001f] will be managed by Spring\n==>  Preparing: INSERT INTO t_article ( id,userid,article_title,article_label,article_category,article_private_category,last_modified,create_time,article_content ) VALUES( ?,?,?,?,?,?,?,?,? ) \n==> Parameters: null, xiaojian(String), 欢迎使用MyBlog-MarkDown编辑器(String), [\"title\",\"title2\"](String), 程序人生(String), [\"艺术\",\"人生\"](String), 2018-10-18 21:55:12.0(Timestamp), 2018-10-18 21:55:12.0(Timestamp), 先直接访问127.0.0.1:8080和localhost:8080，都不能正常访问Tomcat主页，猫不见了。... ERR_CONNECTION_REFUSED在网上找过很多种方法，都没有解决mysql数据库也打...(String)\n<==    Updates: 1\nReleasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@917c47]\nFetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@917c47] from current transaction\n==>  Preparing: insert into t_private_category ( id, category ) values ( ?, ?) , ( ?, ?) \n==> Parameters: xiaojian(String), true(String), xiaojian(String), true(String)\nReleasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@917c47]\n2018-10-18 21:55:12.306 [http-nio-9080-exec-2] INFO  o.s.beans.factory.xml.XmlBeanDefinitionReader - Loading XML bean definitions from class path resource [org/springframework/jdbc/support/sql-error-codes.xml]\n2018-10-18 21:55:12.400 [http-nio-9080-exec-2] INFO  o.s.jdbc.support.SQLErrorCodesFactory - SQLErrorCodes loaded: [DB2, Derby, H2, HSQL, Informix, MS-SQL, MySQL, Oracle, PostgreSQL, Sybase, Hana]\nTransaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@917c47]\nTransaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@917c47]\n2018-10-18 21:55:12.472 [http-nio-9080-exec-2] ERROR o.a.c.c.C.[.[localhost].[/].[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.jdbc.BadSqlGrammarException: \n### Error updating database.  Cause: java.sql.SQLSyntaxErrorException: Unknown column \'id\' in \'field list\'\n### The error may involve com.hbwh.xj.myblog.dao.PersonalCategoryMapper.insertCategories-Inline\n### The error occurred while setting parameters\n### SQL: insert into t_private_category (                       id, category               ) values                        ( ?, ?)          ,              ( ?, ?)\n### Cause: java.sql.SQLSyntaxErrorException: Unknown column \'id\' in \'field list\'\n; bad SQL grammar []; nested exception is java.sql.SQLSyntaxErrorException: Unknown column \'id\' in \'field list\'] with root cause\njava.sql.SQLSyntaxErrorException: Unknown column \'id\' in \'field list\'\n	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:536)\n	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:513)\n	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:115)\n	at com.mysql.cj.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:1983)\n	at com.mysql.cj.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:1826)\n	at com.mysql.cj.jdbc.PreparedStatement.execute(PreparedStatement.java:1153)\n	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)\n	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)\n	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n	at java.lang.reflect.Method.invoke(Method.java:498)\n	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)\n	at com.sun.proxy.$Proxy129.execute(Unknown Source)\n	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:46)\n	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)\n	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)\n	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)\n	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)\n	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n	at java.lang.reflect.Method.invoke(Method.java:498)\n	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)\n	at com.sun.proxy.$Proxy127.update(Unknown Source)\n	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:198)\n	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:185)\n	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n	at java.lang.reflect.Method.invoke(Method.java:498)\n	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:433)\n	at com.sun.proxy.$Proxy88.insert(Unknown Source)\n	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:278)\n	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:57)\n	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:59)\n	at com.sun.proxy.$Proxy95.insertCategories(Unknown Source)\n	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n	at java.lang.reflect.Method.invoke(Method.java:498)\n	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:338)\n	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:197)\n	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:185)\n	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)\n	at com.sun.proxy.$Proxy96.insertCategories(Unknown Source)\n	at com.hbwh.xj.myblog.service.impl.ArticleServiceImpl.publishArticle(ArticleServiceImpl.java:40)\n	at com.hbwh.xj.myblog.service.impl.ArticleServiceImpl$$FastClassBySpringCGLIB$$5e00c91a.invoke(<generated>)\n	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)\n	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:747)\n	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)\n	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)\n	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:185)\n	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:689)\n	at com.hbwh.xj.myblog.service.impl.ArticleServiceImpl$$EnhancerBySpringCGLIB$$301a68c6.publishArticle(<generated>)\n	at com.hbwh.xj.myblog.controller.ArticleController.publishArticle(ArticleController.java:45)\n	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n	at java.lang.reflect.Method.invoke(Method.java:498)\n	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)\n	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)\n	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)\n	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:870)\n	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:776)\n	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\n	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:991)\n	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)\n	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:978)\n	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:881)\n	at javax.servlet.http.HttpServlet.service(HttpServlet.java:661)\n	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:855)\n	at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)\n	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)\n	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)\n	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n	at org.springframework.web.servlet.resource.ResourceUrlEncodingFilter.doFilter(ResourceUrlEncodingFilter.java:60)\n	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:96)\n	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)\n	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199)\n	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)\n	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:496)\n	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:140)\n	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81)\n	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)\n	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)\n	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:803)\n	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)\n	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:790)\n	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1459)\n	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\n	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n	at java.lang.Thread.run(Thread.java:748)\n2018-10-18 21:55:12.481 [http-nio-9080-exec-2] INFO  c.hbwh.xj.myblog.web.interceptor.LoginInterceptor - -----------------request method: POST,url: /error\n', 0, 0, 0, 0);

SET FOREIGN_KEY_CHECKS = 1;
